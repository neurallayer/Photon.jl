<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Metrics · Photon</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../"><img class="logo" src="../assets/logo.png" alt="Photon logo"/></a><h1>Photon</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Get Started</a></li><li><span class="toctext">API</span><ul><li><a class="toctext" href="../core/">Core</a></li><li><a class="toctext" href="../layers/">Layers</a></li><li><a class="toctext" href="../losses/">Losses</a></li><li class="current"><a class="toctext" href>Metrics</a><ul class="internal"><li><a class="toctext" href="#Metrics-1">Metrics</a></li><li><a class="toctext" href="#Callbacks-1">Callbacks</a></li><li><a class="toctext" href="#Utils-1">Utils</a></li></ul></li><li><a class="toctext" href="../data/">Data</a></li></ul></li><li><a class="toctext" href="../community/">Community</a></li></ul></nav><article id="docs"><header><nav><ul><li>API</li><li><a href>Metrics</a></li></ul><a class="edit-page" href="https://github.com/neurallayer/Photon.jl/blob/master/docs/src/metrics.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Metrics</span><a class="fa fa-bars" href="#"></a></div></header><h2><a class="nav-anchor" id="Metrics-1" href="#Metrics-1">Metrics</a></h2><p>Metrics can be passed to the Workout initializer and provide extra insights next to the loss value. Every metric is invoked with two parameters: predicted outcome and the labels.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Metrics.BinaryAccuracy" href="#Photon.Metrics.BinaryAccuracy"><code>Photon.Metrics.BinaryAccuracy</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Binary accuracy calculation</p></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/metrics/core.jl#L56-L58">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Metrics.OneHotBinaryAccuracy" href="#Photon.Metrics.OneHotBinaryAccuracy"><code>Photon.Metrics.OneHotBinaryAccuracy</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Binary accuracy for a onehot classification.</p></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/metrics/core.jl#L70-L72">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Metrics.SmartReducer" href="#Photon.Metrics.SmartReducer"><code>Photon.Metrics.SmartReducer</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Stores the calculated metrics. If multiple values are provided at the same step (like is the case with validation metrics), the moving average over those values will be stored.</p></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/metrics/core.jl#L3-L7">source</a></section><h2><a class="nav-anchor" id="Callbacks-1" href="#Callbacks-1">Callbacks</a></h2><p>Callbacks can be passed to the train! function and provide a way to extend the functionality of Photon. Their functionality ranges from callbacks that generate output (like console or plots), to callbacks that save the model and callbacks that abort the training due to lack of progress.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Callbacks.Meter" href="#Photon.Callbacks.Meter"><code>Photon.Callbacks.Meter</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>A meter is responsible for presenting metric values. It can be used just as a regular callback argument to the <em>train!</em> function. A meter is not limited to printing results to the console output, it can also be showing it on a TensorBoard or storing results in a database for example.</p></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/callbacks/meters.jl#L1-L6">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Callbacks.ConsoleMeter" href="#Photon.Callbacks.ConsoleMeter"><code>Photon.Callbacks.ConsoleMeter</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Logs metrics to the console output. By default it will only log at the end of an epoch and log the epoch, step, loss and validation loss. This is also the default configuration when you run train! without specifying oter callbacks.</p><p><strong>Usage</strong></p><pre><code class="language-julia">meter = ConsoleMeter([:loss, :val_accuracy, :accuracy]; epochOnly=false)
train!(workout, data, val_data; epochs=5, cb=meter)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/callbacks/meters.jl#L29-L40">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Callbacks.SilentMeter" href="#Photon.Callbacks.SilentMeter"><code>Photon.Callbacks.SilentMeter</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Use a SilentMeter in case no output is required. The default of <em>train!</em> function is to use a ConsoleMeter and using the SilentMeter this behavior can be overriden.</p><p><strong>Usage</strong></p><pre><code class="language-julia">train!(workout, data, val_data; epochs=5, cb=SilentMeter())</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/callbacks/meters.jl#L11-L21">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Callbacks.FileMeter" href="#Photon.Callbacks.FileMeter"><code>Photon.Callbacks.FileMeter</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Logs metrics to a delimeted text file. By default it will log the metrics loss and val_loss at the end of each training step and end of the validation phase.</p></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/callbacks/meters.jl#L115-L119">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Callbacks.PlotMeter" href="#Photon.Callbacks.PlotMeter"><code>Photon.Callbacks.PlotMeter</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Plot metrics using the Plots module. At the end of each epoch the plot will be updated with the values of the metrics. This works especially nice if you are prototyping some model in an IDE like Juno.</p></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/callbacks/meters.jl#L152-L156">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Callbacks.TensorBoardMeter" href="#Photon.Callbacks.TensorBoardMeter"><code>Photon.Callbacks.TensorBoardMeter</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Logs metrics to a TensorBoard file so it can be viewed with TensorBoard. By default it will log the metrics loss and val_loss at the end of each training step and end of the validation phase.</p><p>This meter depends on the TensorBoardLogger to be installed. So if you didn&#39;t do so already, please run:</p><pre><code class="language-none">import Pkg; Pkg.add(&quot;TensorBoardLogger&quot;)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/callbacks/meters.jl#L73-L82">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Callbacks.EarlyStop" href="#Photon.Callbacks.EarlyStop"><code>Photon.Callbacks.EarlyStop</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Stop the training if a certain metric didn&#39;t improve</p></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/callbacks/Callbacks.jl#L75-L77">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Callbacks.AutoSave" href="#Photon.Callbacks.AutoSave"><code>Photon.Callbacks.AutoSave</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Save the Workout if a certain metric has improved since the last epoch</p><p><strong>Usage</strong></p><pre><code class="language-julia">
# save as long as the validation loss is declining
train!(workout, data, cb=AutoSave(:val_loss))</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/callbacks/Callbacks.jl#L41-L51">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Callbacks.EpochSave" href="#Photon.Callbacks.EpochSave"><code>Photon.Callbacks.EpochSave</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Save the Workout at the end of every epoch. Optionally provide a filename.</p><p><strong>Usage</strong></p><pre><code class="language-julia">train!(workout, data, cb=EpochSave())</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/callbacks/Callbacks.jl#L15-L23">source</a></section><h2><a class="nav-anchor" id="Utils-1" href="#Utils-1">Utils</a></h2><p>Photon comes with a number of utility functions for common tasks with regards to using metrics.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Metrics.getmetricname" href="#Photon.Metrics.getmetricname"><code>Photon.Metrics.getmetricname</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Function to generate the fully qualified metric name. It uses the metric name and the phase (:train or :valid) to come up with a unique name.</p><pre><code class="language-julia">getmetricname(:loss, :train) # return is :loss
getmetricname(:loss, :valid) # return is :val_loss</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/metrics/core.jl#L23-L31">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Metrics.history" href="#Photon.Metrics.history"><code>Photon.Metrics.history</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Get the history of a metric. The provided metric has the fully qualified name and the returned value is a tuple of steps and values.</p><pre><code class="language-julia">h = history(workout, :val_loss)
# returns e.g ([1000, 2000, 3000, 4000], [0.81, 0.73, 0.64, 0.61])

h = history(workout, :loss)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/metrics/core.jl#L37-L48">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.plotmetrics" href="#Photon.plotmetrics"><code>Photon.plotmetrics</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Plot the metrics after some training. This function will plot all the metrics in a single graph.</p><p>In order to avoid Photon being dependend on Plots, the calling code will have to provide that module as the first parameter.</p><p><strong>Usage</strong></p><pre><code class="language-julia">train!(workout, mydata, epochs=10)

import Plots
plotmetrics(Plots, workout)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/f92803495f927060b83472edf408739146141276/src/utils.jl#L12-L27">source</a></section><footer><hr/><a class="previous" href="../losses/"><span class="direction">Previous</span><span class="title">Losses</span></a><a class="next" href="../data/"><span class="direction">Next</span><span class="title">Data</span></a></footer></article></body></html>
