<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Data · Photon</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../"><img class="logo" src="../assets/logo.png" alt="Photon logo"/></a><h1>Photon</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Get Started</a></li><li><span class="toctext">API</span><ul><li><a class="toctext" href="../core/">Core</a></li><li><a class="toctext" href="../layers/">Layers</a></li><li><a class="toctext" href="../losses/">Losses</a></li><li><a class="toctext" href="../metrics/">Metrics</a></li><li class="current"><a class="toctext" href>Data</a><ul class="internal"><li><a class="toctext" href="#Datasets-1">Datasets</a></li><li><a class="toctext" href="#Transformers-1">Transformers</a></li></ul></li></ul></li><li><a class="toctext" href="../community/">Community</a></li></ul></nav><article id="docs"><header><nav><ul><li>API</li><li><a href>Data</a></li></ul><a class="edit-page" href="https://github.com/neurallayer/Photon.jl/blob/master/docs/src/data.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Data</span><a class="fa fa-bars" href="#"></a></div></header><h2><a class="nav-anchor" id="Datasets-1" href="#Datasets-1">Datasets</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.Dataset" href="#Photon.Data.Dataset"><code>Photon.Data.Dataset</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Datasets can load and transform data and can be used in a pipeline. Typically they would have length and index methods implemented and need to return only a single sample. The MiniBatch transformer would collect these single samples and put them into a mini batch.</p><pre><code class="language-julia">data = SomeDataset() |&gt; SomeTransformer() |&gt; MiniBatch()
train!(workout, data)</code></pre><p>Please note that in case all your data would fit in memory, you can feed it directly to the train! function (so a dataset is not required)</p><pre><code class="language-julia">X = [randn(10,10,16) for i in 1:100]
Y = [randn(1,16) for i in 1:100]
train!(workout, zip(X,Y))</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/dataset.jl#L4-L24">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.ImageDataset" href="#Photon.Data.ImageDataset"><code>Photon.Data.ImageDataset</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Dataset that loads an single image from a file and optionally resizes the image. The labels are passed as is.</p><p><strong>Usage</strong></p><pre><code class="language-julia">ds = ImageDataset(filenames, labels, resize=(200,200))</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/dataset.jl#L117-L126">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.JLDDataset" href="#Photon.Data.JLDDataset"><code>Photon.Data.JLDDataset</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Dataset that loads data from a JLD(2) file. The format that is stored is expected to be in the shape of: (X,Y)</p><p>Note: Tested with JLD2 library only.</p><p><strong>Example:</strong></p><pre><code class="language-julia">using JLD2

jldopen(&quot;example.jld2&quot;, &quot;w&quot;) do file
    file[&quot;image1&quot;] = (randn(Float32,28,28,1), rand(0:9,1))
    file[&quot;image2&quot;] = (randn(Float32,28,28,1), rand(0:9,1))
end

f = jldopen(&quot;example.jld2&quot;, &quot;r&quot;)
ds = JLD2Dataset(f)
ds[1]</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/dataset.jl#L79-L100">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.DFDataset" href="#Photon.Data.DFDataset"><code>Photon.Data.DFDataset</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Dataset that retrieves is data from a dataframe. The provided column names for X and Y can be either a single Symbol or a Vector of Symbols.</p><p><strong>Usage</strong></p><pre><code class="language-julia">df = DataFrame(randn(4,20))
ds = DFDataset(df, :x1, :x2)
ds = DFDataset(df, [:x1, :x3], [:x2,:x4])</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/dataset.jl#L162-L173">source</a></section><div class="admonition warning"><div class="admonition-title">Missing docstring.</div><div class="admonition-text"><p>Missing docstring for <code>JuliaDBDataset</code>. Check Documenter&#39;s build log for details.</p></div></div><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.VectorDataset" href="#Photon.Data.VectorDataset"><code>Photon.Data.VectorDataset</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Dataset that contains two vectors, one for the input data and one for the labels.</p></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/dataset.jl#L66-L68">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.TestDataset" href="#Photon.Data.TestDataset"><code>Photon.Data.TestDataset</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>A dataset that contains random generated samples. Ideal for quick testing of a model. The random values will be drawn from a normal distribution.</p><p>You need to provide the shape of X, Y and the number of samples that the dataset should contain. Optionally you can specify a sleep value to simulate IO blocking.</p><p><strong>Usage</strong></p><pre><code class="language-julia">xshape = (28,28,1)
yshape = (10,)
ds = TestDataset(xshape, yshape, 60000)

ds = TestDataset((100,), (1,), 1000, sleep=0.1)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/dataset.jl#L28-L45">source</a></section><h2><a class="nav-anchor" id="Transformers-1" href="#Transformers-1">Transformers</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.Transformer" href="#Photon.Data.Transformer"><code>Photon.Data.Transformer</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Transformers enable you to transform the output generated by a datasets. Many of the transformers can be chained together.</p><pre><code class="language-julia">data = SomeDataset(...)
data = data |&gt; Transformer1(...) |&gt; Transformer2(...) |&gt; Transformer3(...)

train!(workout, data)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/transformer.jl#L3-L13">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.ImageCrop" href="#Photon.Data.ImageCrop"><code>Photon.Data.ImageCrop</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Randomly crop an image in the shape of WxHxC to a certain size. This Transformer uses plain Array operations and doesn&#39;t rely on packages like Images.jl</p><p><strong>Usage</strong></p><pre><code class="language-julia"># Only crop X
ds = TestDataset((100,100,3),(10,),100)
ds = ds |&gt; ImageCrop((50,50))


# Crop both X and Y
ds = TestDataset((100,100,3),(50,50,3),100)
ds = ds |&gt; ImageCrop((50,50), (20,20))</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/transformer.jl#L119-L136">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.Normalizer" href="#Photon.Data.Normalizer"><code>Photon.Data.Normalizer</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Normalize data before feeding it to a model. A typical usecase is to normalize an image.  By default will only normalize to the input data (:X) and not the labels (:Y).</p><p><strong>Usage</strong></p><pre><code class="language-julia">ds = TestDataset((28,28,1),(10,),100) |&gt; Normalize()</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/transformer.jl#L58-L67">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.OneHotEncoder" href="#Photon.Data.OneHotEncoder"><code>Photon.Data.OneHotEncoder</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>OneHot transformer for a single sample. Uses the onehot function to perform the actual transoformation.</p><p>Supports both single and multi class encoding:</p><pre><code class="language-none">5 =&gt; [0,0,0,0,0,1,0,0,0,0]
[5,7] =&gt; [0,0,0,0,0,1,0,1,0,0]</code></pre><p><strong>Usage</strong></p><pre><code class="language-julia">ds = mnistds() |&gt; OneHotEncoder(0:9)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/transformer.jl#L185-L199">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.Subset" href="#Photon.Data.Subset"><code>Photon.Data.Subset</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Return a subset of samples of the underlying dataset. Optionally you can specify a start index (default = 1).</p><p><strong>Usage</strong></p><pre><code class="language-julia">data = MyDataset() |&gt; Subset(1:100)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/transformer.jl#L224-L233">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.NoisingTransfomer" href="#Photon.Data.NoisingTransfomer"><code>Photon.Data.NoisingTransfomer</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Add noise to the samples in a dataset. By default will only add noise to the input data (:X) and not the labels (:Y).</p><p><strong>Usage</strong></p><pre><code class="language-julia">ds = TestDataset((28,28,1),(10,),100)
ds = ds |&gt; NoiseTransformer(noiselevel=0.05)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/transformer.jl#L23-L33">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.MiniBatch" href="#Photon.Data.MiniBatch"><code>Photon.Data.MiniBatch</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>A MiniBatch is a transformer that will collect multiple samples from the underlying dataset and put it in a minibatch. So it will call a dataset to get a single sample and combines them into a minibatch. The MiniBatch itself is an iterator.</p><p>It will do this using threading, so when a dataset will read some samples from disk this won&#39;t become a botttleneck.</p><p><strong>Usage</strong></p><pre><code class="language-julia">data = ImageDataset(filenames,labels) |&gt; MiniBatch(16, shuffle=False)
train!(workout, data)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/transformer.jl#L299-L314">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Photon.Data.Split" href="#Photon.Data.Split"><code>Photon.Data.Split</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Split one dataset into two subsets, one for training and one for validation. By default Split will shuffle the indexes first in order to get a representative validaiton set. The default split is 80% for training and 20% for validation.</p><p><strong>Usage</strong></p><pre><code class="language-julia">data_train, data_valid = ImageDataset(...) |&gt; Split(0.25, shuffle=false)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/neurallayer/Photon.jl/blob/d858ea2907ea006f648261a35431143ae1e8c0d0/src/data/transformer.jl#L245-L255">source</a></section><footer><hr/><a class="previous" href="../metrics/"><span class="direction">Previous</span><span class="title">Metrics</span></a><a class="next" href="../community/"><span class="direction">Next</span><span class="title">Community</span></a></footer></article></body></html>
